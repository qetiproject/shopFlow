<article
  class="group flex flex-col overflow-hidden rounded-2xl bg-white shadow-sm ring-1 ring-gray-200 transition
         hover:-translate-y-0.5 hover:shadow-lg sm:flex-row"
  >
  <div
    class="relative h-48 w-full overflow-hidden bg-gray-100
           sm:h-52 sm:w-52 sm:shrink-0"
    >
    <img
      class="h-full w-full object-cover transition duration-300 group-hover:scale-105"
      [src]="product.thumbnail"
      [alt]="product.title"
      loading="lazy"
      />
      @if (product.discountPercentage) {
        <div
      class="absolute left-3 top-3 inline-flex items-center rounded-full
             bg-red-600 px-2.5 py-1 text-xs font-semibold text-white shadow"
          >
          -{{ product.discountPercentage | number:'1.0-0' }}%
        </div>
      }
    </div>
    <div class="flex min-w-0 flex-1 flex-col p-4 sm:p-5">
      <h3 class="truncate text-base font-semibold text-gray-900 sm:text-lg">
        {{ product.title }}
      </h3>
      <p
        class="mt-2 line-clamp-2 text-sm leading-6 text-gray-600 sm:line-clamp-3"
        >
        {{ product.description }}
      </p>
      <div
      class="mt-4 flex flex-col gap-3
             sm:flex-row sm:items-end sm:justify-between"
        >
        <div class="flex flex-col">
          <span class="text-xs text-gray-500">Price</span>

          <div class="flex items-baseline gap-2">
            <span class="text-lg font-bold text-gray-900 sm:text-xl">
              {{ product.price | currency:'USD':'symbol':'1.0-0' }}
            </span>

            @if (product.discountPercentage) {
              <span
                class="text-sm text-gray-400 line-through"
                >
                {{
                (product.price / (1 - (product.discountPercentage / 100)))
                | currency:'USD':'symbol':'1.0-0'
                }}
              </span>
            }
          </div>
        </div>
        <button
          type="button"
        class="inline-flex w-full items-center justify-center rounded-xl
               bg-gray-900 px-4 py-2 text-sm font-semibold text-white
               transition hover:bg-gray-800 active:scale-[0.98]
               sm:w-auto"
          >
          Add to cart
        </button>
      </div>
      <div
        class="mt-4 flex flex-wrap items-center gap-2 text-xs text-gray-500"
        >
        @if (product.discountPercentage) {
          <span
            class="inline-flex items-center rounded-full bg-gray-100 px-2 py-1"
            >
            Discount: {{ product.discountPercentage | number:'1.0-0' }}%
          </span>
        }
      </div>
    </div>
  </article>
